# 多语言功能说明

## 概述

本旅行微信小程序已成功集成中英文双语支持，用户可以在个人资料页面轻松切换语言。

## 支持的语言

- 🇨🇳 **中文（简体）** - 默认语言
- 🇺🇸 **English** - 英语

## 功能特性

### ✅ 已实现的多语言功能

1. **页面标题国际化**
   - 探索页面：探索 / Explore
   - 航班页面：航班 / Flights  
   - 酒店页面：酒店 / Hotels
   - 行程页面：我的预订 / My Bookings
   - 个人资料页面：账户 / Account

2. **界面文本国际化**
   - 所有按钮文本
   - 表单占位符
   - 错误提示信息
   - 成功提示信息
   - 设置项目名称

3. **内容数据国际化**
   - 热门目的地城市名称
   - 推荐行程标题和描述
   - 航班城市列表
   - 酒店房间选项
   - 行程预订详情

4. **动态语言切换**
   - 实时语言切换无需重启
   - 所有打开页面同步更新
   - 语言偏好自动保存到本地存储

## 使用方法

### 切换语言
1. 打开小程序
2. 点击底部导航的"个人资料"
3. 在设置部分点击"语言"
4. 从弹出的选择器中选择所需语言
5. 系统会立即切换语言并显示成功提示

### 开发者使用

```javascript
// 获取全局i18n实例
const app = getApp();
const i18n = app.globalData.i18n;

// 获取翻译文本
const title = i18n.t('explore.title');
const placeholder = i18n.t('flights.fromPlaceholder');

// 在页面中添加语言变更回调
Page({
  // 语言变更回调
  onLanguageChange: function() {
    this.updateLanguage();
  },
  
  // 更新页面语言
  updateLanguage: function() {
    const i18n = app.globalData.i18n;
    this.setData({
      pageTitle: i18n.t('page.title'),
      // ... 其他文本
    });
  }
});
```

## 技术实现

### 架构设计

1. **i18n.js** - 多语言配置和工具类
   - 语言配置存储
   - 翻译函数实现
   - 语言切换逻辑

2. **app.js** - 全局语言管理
   - 初始化多语言系统
   - 提供语言切换接口
   - 通知页面语言变更

3. **页面实现** - 各页面多语言支持
   - 语言变更回调函数
   - 动态文本更新
   - 数据国际化

### 安全特性

- ✅ 输入验证：所有语言切换都经过验证
- ✅ 错误处理：翻译键不存在时提供默认值
- ✅ 数据安全：使用微信小程序安全存储API
- ✅ 类型检查：严格的参数类型验证

## 已知限制

### TabBar 文本限制
⚠️ **重要提醒**：由于微信小程序的技术限制，底部导航栏（TabBar）的文本无法动态更改。这些文本在 `app.json` 中静态配置，只能显示中文：

- 探索
- 航班  
- 酒店
- 行程
- 个人资料

这是微信小程序框架的固有限制，不是实现问题。除此之外，应用内的所有其他文本都完全支持中英文切换。

## 扩展支持

### 添加新语言

1. 在 `utils/i18n.js` 中添加新语言配置：

```javascript
const languages = {
  zh: { /* 中文配置 */ },
  en: { /* 英文配置 */ },
  ja: { /* 日文配置 - 新增 */ }
};
```

2. 在 `profile.js` 的语言选择器中添加新选项：

```javascript
wx.showActionSheet({
  itemList: [
    `${i18n.t('language.chinese')} ${currentLang === 'zh' ? '✓' : ''}`,
    `${i18n.t('language.english')} ${currentLang === 'en' ? '✓' : ''}`,
    `${i18n.t('language.japanese')} ${currentLang === 'ja' ? '✓' : ''}` // 新增
  ],
  // ...
});
```

### 添加新的翻译文本

在对应语言配置中添加新的键值对：

```javascript
zh: {
  newSection: {
    title: '新标题',
    description: '新描述'
  }
}
```

## 测试

运行测试文件验证多语言功能：

```bash
# 在小程序开发工具中运行
node miniprogram/test_i18n.js
```

## 维护指南

1. **翻译质量**：确保所有翻译准确、专业
2. **一致性**：保持各页面用词统一
3. **完整性**：新增功能时同步添加多语言支持
4. **测试**：每次更新后测试语言切换功能

---

**版本**: 1.0  
**更新时间**: 2024-12-30  
**支持语言**: 中文(zh) / English(en)